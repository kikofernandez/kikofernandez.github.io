<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Applicative.Typechecker</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Applicative.Typechecker.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2019 Elias Castegren and Kiko Fernandez-Reyes</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Applicative.Typechecker</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module includes everything you need to get started type checking
 a program. To build the Abstract Syntax Tree (AST), please import and build
 <a href="Applicative-AST.html">Applicative.AST</a>.</p><p>The main entry point to the type checker is the combinator <code><a href="Applicative-Typechecker.html#v:tcProgram" title="Applicative.Typechecker">tcProgram</a></code>, which
 takes an AST and returns either a list of errors, or the typed program.
 For example, for the following program (using a made up syntax):</p><pre>
class C
  val f: Foo
</pre><p>should be parsed to generate this AST:</p><pre>testClass1 =
 ClassDef {cname = &quot;C&quot;
          ,fields = [FieldDef {fmod = Val, fname = &quot;f&quot;, ftype = ClassType &quot;Foo&quot;}]
          ,methods = []}
</pre><p>To type check the AST, run the <code><a href="Applicative-Typechecker.html#v:tcProgram" title="Applicative.Typechecker">tcProgram</a></code> combinator as follows:</p><pre>tcProgram testClass1</pre><p>This is an increment on top of the <code><a href="Backtrace.html#v:Typechecker" title="Backtrace">Typechecker</a></code> module,
 that refactors the type checker to be able to throw multiple errors.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Except">Except</a> err a<ul class="subs"><li>= <a href="#v:Result">Result</a> a</li><li>| <a href="#v:Error">Error</a> err</li></ul></li><li class="src short"><a href="#v:throwError">throwError</a> :: <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> a</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:TCErrors">TCErrors</a> = <a href="#v:TCErrors">TCErrors</a> (NonEmpty <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:TCError">TCError</a><ul class="subs"><li>= <a href="#v:UnknownClassError">UnknownClassError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></li><li>| <a href="#v:UnknownFieldError">UnknownFieldError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></li><li>| <a href="#v:UnknownMethodError">UnknownMethodError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></li><li>| <a href="#v:UnboundVariableError">UnboundVariableError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></li><li>| <a href="#v:TypeMismatchError">TypeMismatchError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li>| <a href="#v:ImmutableFieldError">ImmutableFieldError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></li><li>| <a href="#v:NonLValError">NonLValError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></li><li>| <a href="#v:PrimitiveNullError">PrimitiveNullError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li>| <a href="#v:NonClassTypeError">NonClassTypeError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li>| <a href="#v:NonArrowTypeError">NonArrowTypeError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li>| <a href="#v:ConstructorCallError">ConstructorCallError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li>| <a href="#v:UninferrableError">UninferrableError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></li><li>| <a href="#v:MultipleErrors">MultipleErrors</a> [<a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Env">Env</a> = <a href="#v:Env">Env</a> {<ul class="subs"><li><a href="#v:ctable">ctable</a> :: Map <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></li><li><a href="#v:vartable">vartable</a> :: Map <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li><a href="#v:constructor">constructor</a> :: Bool</li></ul>}</li><li class="src short"><a href="#v:emptyEnv">emptyEnv</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></li><li class="src short"><a href="#v:lookupClass">lookupClass</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></li><li class="src short"><a href="#v:lookupField">lookupField</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:FieldDef" title="Applicative.AST">FieldDef</a></li><li class="src short"><a href="#v:lookupMethod">lookupMethod</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:MethodDef" title="Applicative.AST">MethodDef</a></li><li class="src short"><a href="#v:lookupVar">lookupVar</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></li><li class="src short"><a href="#v:genEnv">genEnv</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></li><li class="src short"><a href="#v:addVariable">addVariable</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></li><li class="src short"><a href="#v:addParameters">addParameters</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; [<a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a>] -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></li><li class="src short"><a href="#v:tcProgram">tcProgram</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:Typecheckable">Typecheckable</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> a</li></ul></li><li class="src short"><a href="#v:hasType">hasType</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></li><li class="src short"><a href="#v:testClass1">testClass1</a> :: <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></li><li class="src short"><a href="#v:testClass2">testClass2</a> :: <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></li><li class="src short"><a href="#v:testProgram">testProgram</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Except" class="def">Except</a> err a <a href="src/Applicative.Typechecker.html#Except" class="link">Source</a> <a href="#t:Except" class="selflink">#</a></p><div class="doc"><p>Define our own Exception datatype  to be able to redefine the
 Applicative interface</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Result" class="def">Result</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Error" class="def">Error</a> err</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Except" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Except:Monad:1"></span> Semigroup err =&gt; Monad (<a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err)</span> <a href="src/Applicative.Typechecker.html#line-62" class="link">Source</a> <a href="#t:Except" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Except:Monad:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; (a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b) -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b</p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b</p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a</p><p class="src"><a href="#v:fail">fail</a> :: String -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Except:Functor:2"></span> Functor (<a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err)</span> <a href="src/Applicative.Typechecker.html#line-53" class="link">Source</a> <a href="#t:Except" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Except:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b</p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Except:Applicative:3"></span> Semigroup err =&gt; Applicative (<a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err)</span> <a href="src/Applicative.Typechecker.html#line-55" class="link">Source</a> <a href="#t:Except" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Except:Applicative:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err (a -&gt; b) -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b</p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err c</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err b -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Except:Show:4"></span> (Show a, Show err) =&gt; Show (<a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a)</span> <a href="src/Applicative.Typechecker.html#line-53" class="link">Source</a> <a href="#t:Except" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Except:Show:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> err a] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:throwError" class="def">throwError</a> :: <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> a <a href="src/Applicative.Typechecker.html#throwError" class="link">Source</a> <a href="#v:throwError" class="selflink">#</a></p><div class="doc"><p>Throw a type checking <code><a href="Applicative-Typechecker.html#v:Error" title="Applicative.Typechecker">Error</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TCErrors" class="def">TCErrors</a> <a href="src/Applicative.Typechecker.html#TCErrors" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></p><div class="doc"><p>Declaration of type checking errors. An error will (usually) be
 created using the helper function <code><a href="Applicative-Typechecker.html#v:throwError" title="Applicative.Typechecker">throwError</a></code>. As an example:</p><pre>throwError $ DuplicateClassError (Name &quot;Foo&quot;)</pre><p>throws an error that indicates that the class is defined multiple times.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TCErrors" class="def">TCErrors</a> (NonEmpty <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:TCErrors" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCErrors:Show:1"></span> Show <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a></span> <a href="src/Applicative.Typechecker.html#line-81" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCErrors:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCErrors:Semigroup:2"></span> Semigroup <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a></span> <a href="src/Applicative.Typechecker.html#line-79" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCErrors:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: NonEmpty <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a></p><p class="src"><a href="#v:stimes">stimes</a> :: Integral b =&gt; b -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> -&gt; <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TCError" class="def">TCError</a> <a href="src/Applicative.Typechecker.html#TCError" class="link">Source</a> <a href="#t:TCError" class="selflink">#</a></p><div class="doc"><p>Declaration of a type checking errors</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnknownClassError" class="def">UnknownClassError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></td><td class="doc"><p>Reference of a class that does not exists</p></td></tr><tr><td class="src"><a id="v:UnknownFieldError" class="def">UnknownFieldError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></td><td class="doc"><p>Reference of a field that does not exists</p></td></tr><tr><td class="src"><a id="v:UnknownMethodError" class="def">UnknownMethodError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></td><td class="doc"><p>Reference of a method that does not exists</p></td></tr><tr><td class="src"><a id="v:UnboundVariableError" class="def">UnboundVariableError</a> <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></td><td class="doc"><p>Unbound variable</p></td></tr><tr><td class="src"><a id="v:TypeMismatchError" class="def">TypeMismatchError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></td><td class="doc"><p>Type mismatch error, the first <code>Type</code> refers to the formal type argument,
 the second <code>Type</code> refers to the actual type argument.</p></td></tr><tr><td class="src"><a id="v:ImmutableFieldError" class="def">ImmutableFieldError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></td><td class="doc"><p>Immutable field error, used when someone violates immutability</p></td></tr><tr><td class="src"><a id="v:NonLValError" class="def">NonLValError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></td><td class="doc"><p>Error to indicate that a one cannot assign a value to expression <code>Expr</code></p></td></tr><tr><td class="src"><a id="v:PrimitiveNullError" class="def">PrimitiveNullError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></td><td class="doc"><p>Error indicating that the return type cannot be <code>Null</code></p></td></tr><tr><td class="src"><a id="v:NonClassTypeError" class="def">NonClassTypeError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></td><td class="doc"><p>Used to indicate that <code>Type</code> is not of a class type</p></td></tr><tr><td class="src"><a id="v:NonArrowTypeError" class="def">NonArrowTypeError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></td><td class="doc"><p>Expecting a function (arrow) type but got another type instead.</p></td></tr><tr><td class="src"><a id="v:ConstructorCallError" class="def">ConstructorCallError</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></td><td class="doc"><p>Tried to call a constructor outside of instantiation</p></td></tr><tr><td class="src"><a id="v:UninferrableError" class="def">UninferrableError</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></td><td class="doc"><p>Cannot infer type of <code>Expr</code></p></td></tr><tr><td class="src"><a id="v:MultipleErrors" class="def">MultipleErrors</a> [<a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a>]</td><td class="doc"><p>Contains multiple errors during type checking</p></td></tr></table></div><div class="subs instances"><details id="i:TCError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCError:Show:1"></span> Show <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a></span> <a href="src/Applicative.Typechecker.html#line-121" class="link">Source</a> <a href="#t:TCError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCError:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Env" class="def">Env</a> <a href="src/Applicative.Typechecker.html#Env" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></p><div class="doc"><p>Environment. The <code><a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></code> is used during type checking, and is updated as
 the type checker runs. Most likely, one uses the <code>Reader</code> monad to hide details
 of how the environment is updated, via the common <code>local</code> function.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Env" class="def">Env</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ctable" class="def">ctable</a> :: Map <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:vartable" class="def">vartable</a> :: Map <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:constructor" class="def">constructor</a> :: Bool</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:emptyEnv" class="def">emptyEnv</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> <a href="src/Applicative.Typechecker.html#emptyEnv" class="link">Source</a> <a href="#v:emptyEnv" class="selflink">#</a></p><div class="doc"><p>Generates an empty environment.</p></div></div><div class="top"><p class="src"><a id="v:lookupClass" class="def">lookupClass</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a> <a href="src/Applicative.Typechecker.html#lookupClass" class="link">Source</a> <a href="#v:lookupClass" class="selflink">#</a></p><div class="doc"><p>Helper function to lookup a class given a <code><a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></code> and an <code><a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></code>.
 For example:</p><pre>typecheck env (ClassType c) = do
  _ &lt;- lookupClass env c
  return $ ClassType c</pre></div></div><div class="top"><p class="src"><a id="v:lookupField" class="def">lookupField</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:FieldDef" title="Applicative.AST">FieldDef</a> <a href="src/Applicative.Typechecker.html#lookupField" class="link">Source</a> <a href="#v:lookupField" class="selflink">#</a></p><div class="doc"><p>Look up a field by its <code><a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></code> and <code><a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></code> in the <code><a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></code>, returning an error
 indicating whether the field was found or not.</p></div></div><div class="top"><p class="src"><a id="v:lookupMethod" class="def">lookupMethod</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:MethodDef" title="Applicative.AST">MethodDef</a> <a href="src/Applicative.Typechecker.html#lookupMethod" class="link">Source</a> <a href="#v:lookupMethod" class="selflink">#</a></p><div class="doc"><p>Find a method declaration by its <code><a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></code> (<code>ty</code>) and field name <code>f</code></p></div></div><div class="top"><p class="src"><a id="v:lookupVar" class="def">lookupVar</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> <a href="src/Applicative.Typechecker.html#lookupVar" class="link">Source</a> <a href="#v:lookupVar" class="selflink">#</a></p><div class="doc"><p>Look up a variable by its <code><a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a></code> in the <code><a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></code>, returning an exception
 with the type checking error, <code><a href="Applicative-Typechecker.html#t:TCError" title="Applicative.Typechecker">TCError</a></code>, or the <code><a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></code> of the variable <code>x</code>.</p></div></div><div class="top"><p class="src"><a id="v:genEnv" class="def">genEnv</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> <a href="src/Applicative.Typechecker.html#genEnv" class="link">Source</a> <a href="#v:genEnv" class="selflink">#</a></p><div class="doc"><p>Generates an environment (symbol's table) from a <code><a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a></code>,</p></div></div><div class="top"><p class="src"><a id="v:addVariable" class="def">addVariable</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Name" title="Applicative.AST">Name</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> <a href="src/Applicative.Typechecker.html#addVariable" class="link">Source</a> <a href="#v:addVariable" class="selflink">#</a></p><div class="doc"><p>Add a variable name and its type to the environment <code><a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:addParameters" class="def">addParameters</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; [<a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a>] -&gt; <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> <a href="src/Applicative.Typechecker.html#addParameters" class="link">Source</a> <a href="#v:addParameters" class="selflink">#</a></p><div class="doc"><p>Add a list of parameters, <code><a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a></code>, to the environment.</p></div></div><div class="top"><p class="src"><a id="v:tcProgram" class="def">tcProgram</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> <a href="src/Applicative.Typechecker.html#tcProgram" class="link">Source</a> <a href="#v:tcProgram" class="selflink">#</a></p><div class="doc"><p>Main entry point of the type checker. This function type checks an AST
 returning either a list of errors or a well-typed program. For instance,
 assuming the following made up language:
 &gt;
 &gt; class C
 &gt;   val f: Foo
 &gt;</p><p>it should be parsed to generate the following AST:</p><pre>testClass1 =
 ClassDef {cname = &quot;C&quot;
          ,fields = [FieldDef {fmod = Val, fname = &quot;f&quot;, ftype = ClassType &quot;Foo&quot;}]
          ,methods = []}
</pre><p>To type check the AST, run the <code><a href="Applicative-Typechecker.html#v:tcProgram" title="Applicative.Typechecker">tcProgram</a></code> combinator as follows:</p><pre>tcProgram testClass1</pre><p>which either returns a list of errors or the resulting typed AST.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Typecheckable" class="def">Typecheckable</a> a <span class="keyword">where</span> <a href="src/Applicative.Typechecker.html#Typecheckable" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></p><div class="doc"><p>The type class defines how to type check an AST node.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:typecheck" class="def">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; a -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> a <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p><div class="doc"><p>Type check the well-formedness of an AST node.</p></div></div><div class="subs instances"><details id="i:Typecheckable" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:1"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a></span> <a href="src/Applicative.Typechecker.html#line-305" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:2"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:MethodDef" title="Applicative.AST">MethodDef</a></span> <a href="src/Applicative.Typechecker.html#line-289" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:MethodDef" title="Applicative.AST">MethodDef</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:MethodDef" title="Applicative.AST">MethodDef</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:3"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a></span> <a href="src/Applicative.Typechecker.html#line-284" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Param" title="Applicative.AST">Param</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:4"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:FieldDef" title="Applicative.AST">FieldDef</a></span> <a href="src/Applicative.Typechecker.html#line-279" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:FieldDef" title="Applicative.AST">FieldDef</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:FieldDef" title="Applicative.AST">FieldDef</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:5"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a></span> <a href="src/Applicative.Typechecker.html#line-271" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:6"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a></span> <a href="src/Applicative.Typechecker.html#line-268" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:7"></span> <a href="Applicative-Typechecker.html#t:Typecheckable" title="Applicative.Typechecker">Typecheckable</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a></span> <a href="src/Applicative.Typechecker.html#line-256" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Applicative-Typechecker.html">Applicative.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> <a href="src/Applicative.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:hasType" class="def">hasType</a> :: <a href="Applicative-Typechecker.html#t:Env" title="Applicative.Typechecker">Env</a> -&gt; <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a> -&gt; <a href="Applicative-AST.html#t:Type" title="Applicative.AST">Type</a> -&gt; <a href="Applicative-Typechecker.html#t:Except" title="Applicative.Typechecker">Except</a> <a href="Applicative-Typechecker.html#t:TCErrors" title="Applicative.Typechecker">TCErrors</a> <a href="Applicative-AST.html#t:Expr" title="Applicative.AST">Expr</a> <a href="src/Applicative.Typechecker.html#hasType" class="link">Source</a> <a href="#v:hasType" class="selflink">#</a></p><div class="doc"><p>This combinator is used whenever a certain type is expected. This function
 is quite important. Here follows an example:</p><pre>doTypecheck mdef@(MethodDef {mparams, mbody, mtype}) = do
  -- typecheck the well-formedness of types of method parameters
  mparams' &lt;- mapM typecheck mparams
  mtype' &lt;- typecheck mtype

  -- extend environment with method parameters and typecheck body
  mbody' &lt;- local (addParameters mparams) $ hasType mbody mtype'
  ...</pre><p>in the last line, because we are type checking a method declaration,
 it is statically known what should be the return type of the function body. In these
 cases, one should use the <code><a href="Applicative-Typechecker.html#v:hasType" title="Applicative.Typechecker">hasType</a></code> combinator.</p></div></div><div class="top"><p class="src"><a id="v:testClass1" class="def">testClass1</a> :: <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a> <a href="src/Applicative.Typechecker.html#testClass1" class="link">Source</a> <a href="#v:testClass1" class="selflink">#</a></p><div class="doc"><p>Class definition for didactic purposes. This AST represents the following
 class, which is named <code>C</code>, contains an immutable field <code>f</code> of type <code>Foo</code>:</p><pre>class C:
  val f: Foo</pre><p>This class is ill-typed, as there is no declaration of <code>Foo</code> anywhere.
 To check how to type checker catches this error, run:</p><pre>tcProgram (Program [testClass1])</pre></div></div><div class="top"><p class="src"><a id="v:testClass2" class="def">testClass2</a> :: <a href="Applicative-AST.html#t:ClassDef" title="Applicative.AST">ClassDef</a> <a href="src/Applicative.Typechecker.html#testClass2" class="link">Source</a> <a href="#v:testClass2" class="selflink">#</a></p><div class="doc"><p>Test program with a class, field, method, and variable access. The class <code>Bar</code>
 does not exist in the environment. The variable access is unbound.</p><p>This program is the AST equivalent of the following syntax:</p><pre>class D
  val g: Bar
  def m(): Int
    x</pre></div></div><div class="top"><p class="src"><a id="v:testProgram" class="def">testProgram</a> :: <a href="Applicative-AST.html#t:Program" title="Applicative.AST">Program</a> <a href="src/Applicative.Typechecker.html#testProgram" class="link">Source</a> <a href="#v:testProgram" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>