<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Final.Typechecker</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Final.Typechecker.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2019 Elias Castegren and Kiko Fernandez-Reyes</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Final.Typechecker</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Type checking monad</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module includes everything you need to get started type checking
 a program. To build the Abstract Syntax Tree (AST), please import and build
 the AST from <a href="Final-AST.html">Final.AST</a>.</p><p>The main entry point to the type checker is the combinator <code><a href="Final-Typechecker.html#v:tcProgram" title="Final.Typechecker">tcProgram</a></code>, which
 takes an AST and returns either a list of errors, or the program and the
 generated warnings. For example, for the following program (using a made up syntax):</p><pre>
class C
  val f: Foo
</pre><p>should be parsed to generate this AST:</p><pre>testClass1 =
 ClassDef {cname = &quot;C&quot;
          ,fields = [FieldDef {fmod = Val, fname = &quot;f&quot;, ftype = ClassType &quot;Foo&quot;}]
          ,methods = []}
</pre><p>To type check the AST, run the <code><a href="Final-Typechecker.html#v:tcProgram" title="Final.Typechecker">tcProgram</a></code> combinator as follows:</p><pre>tcProgram testClass1</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:TypecheckM">TypecheckM</a> a = <span class="keyword">forall</span> m. (MonadReader <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> m, MonadError <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> m, MonadWriter [<a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a>] m) =&gt; m a</li><li class="src short"><a href="#v:-60-:-62-">(&lt;:&gt;)</a> :: Semigroup e =&gt; Either e a -&gt; Either e b -&gt; Either e (a, b)</li><li class="src short"><a href="#v:-60--38--62-">(&lt;&amp;&gt;)</a> :: (Semigroup e, MonadError e m) =&gt; m a -&gt; m b -&gt; m (a, b)</li><li class="src short"><a href="#v:forkM">forkM</a> :: (Semigroup e, MonadError e m) =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:TCErrors">TCErrors</a> = <a href="#v:TCErrors">TCErrors</a> (NonEmpty <a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:TCError">TCError</a> = <a href="#v:TCError">TCError</a> <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a> <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TCWarning">TCWarning</a> = <a href="#v:TCWarning">TCWarning</a> <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Warning">Warning</a><ul class="subs"><li>= <a href="#v:ShadowedVarWarning">ShadowedVarWarning</a> <a href="Final-AST.html#t:Name" title="Final.AST">Name</a></li><li>| <a href="#v:UnusedVariableWarning">UnusedVariableWarning</a> <a href="Final-AST.html#t:Name" title="Final.AST">Name</a></li></ul></li><li class="src short"><a href="#v:tcError">tcError</a> :: <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> a</li><li class="src short"><a href="#v:tcWarning">tcWarning</a> :: <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Error">Error</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:DuplicateClassError">DuplicateClassError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:UnknownClassError">UnknownClassError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:UnknownFieldError">UnknownFieldError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:UnknownMethodError">UnknownMethodError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:UnboundVariableError">UnboundVariableError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:TypeMismatchError">TypeMismatchError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:ImmutableFieldError">ImmutableFieldError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:NonLValError">NonLValError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:PrimitiveNullError">PrimitiveNullError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:NonClassTypeError">NonClassTypeError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:NonArrowTypeError">NonArrowTypeError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:ConstructorCallError">ConstructorCallError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li><li><a href="#v:UninferrableError">UninferrableError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:MethodEntry">MethodEntry</a> = <a href="#v:MethodEntry">MethodEntry</a> {<ul class="subs"><li><a href="#v:meparams">meparams</a> :: [<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>]</li><li><a href="#v:metype">metype</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:FieldEntry">FieldEntry</a> = <a href="#v:FieldEntry">FieldEntry</a> {<ul class="subs"><li><a href="#v:femod">femod</a> :: <a href="Final-AST.html#t:Mod" title="Final.AST">Mod</a></li><li><a href="#v:fetype">fetype</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ClassEntry">ClassEntry</a> = <a href="#v:ClassEntry">ClassEntry</a> {<ul class="subs"><li><a href="#v:cefields">cefields</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></li><li><a href="#v:cemethods">cemethods</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Env">Env</a><ul class="subs"><li>= <a href="#v:PreEnv">PreEnv</a> { <ul class="subs"><li><a href="#v:classes">classes</a> :: [<a href="Final-AST.html#t:Name" title="Final.AST">Name</a>]</li><li><a href="#v:bt">bt</a> :: <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></li></ul> }</li><li>| <a href="#v:Env">Env</a> { <ul class="subs"><li><a href="#v:ctable">ctable</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></li><li><a href="#v:vartable">vartable</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li><a href="#v:bt">bt</a> :: <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></li><li><a href="#v:constructor">constructor</a> :: Bool</li></ul> }</li></ul></li><li class="src short"><a href="#v:setConstructor">setConstructor</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><a href="#v:pushBT">pushBT</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> a =&gt; a -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><a href="#v:lookupClass">lookupClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Maybe <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></li><li class="src short"><a href="#v:validClass">validClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Bool</li><li class="src short"><a href="#v:lookupVar">lookupVar</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Maybe (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li class="src short"><a href="#v:resolveClass">resolveClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li class="src short"><a href="#v:findClass">findClass</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></li><li class="src short"><a href="#v:findMethod">findMethod</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></li><li class="src short"><a href="#v:findField">findField</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></li><li class="src short"><a href="#v:findVar">findVar</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li class="src short"><a href="#v:isBound">isBound</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> Bool</li><li class="src short"><a href="#v:generatePreEnv">generatePreEnv</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> p -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:Precheckable">Precheckable</a> a b | a -&gt; b <span class="keyword">where</span><ul class="subs"><li><a href="#v:doPrecheck">doPrecheck</a> :: a -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> b</li><li><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> a =&gt; a -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> b</li></ul></li><li class="src short"><a href="#v:generateEnvironment">generateEnvironment</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><a href="#v:addVariable">addVariable</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><a href="#v:addParameters">addParameters</a> :: [<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>] -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></li><li class="src short"><a href="#v:tcProgram">tcProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; Either <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>, [<a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a>])</li><li class="src short"><span class="keyword">class</span> <a href="#t:Typecheckable">Typecheckable</a> a b | a -&gt; b <span class="keyword">where</span><ul class="subs"><li><a href="#v:doTypecheck">doTypecheck</a> :: a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (b <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> (a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) =&gt; a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (b <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li></ul></li><li class="src short"><a href="#v:checkShadowing">checkShadowing</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> ()</li><li class="src short"><a href="#v:checkVariableUsage">checkVariableUsage</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> ()</li><li class="src short"><a href="#v:hasType">hasType</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</li><li class="src short"><a href="#v:testClass1">testClass1</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> ip</li><li class="src short"><a href="#v:testClass2">testClass2</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a></li><li class="src short"><a href="#v:testClass3">testClass3</a> :: [<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>]</li><li class="src short"><a href="#v:testProgram">testProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a></li><li class="src short"><a href="#v:testValidProgram">testValidProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type checking monad</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TypecheckM" class="def">TypecheckM</a> a = <span class="keyword">forall</span> m. (MonadReader <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> m, MonadError <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> m, MonadWriter [<a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a>] m) =&gt; m a <a href="src/Final.Typechecker.html#TypecheckM" class="link">Source</a> <a href="#t:TypecheckM" class="selflink">#</a></p><div class="doc"><p>The type checking monad. The type checking monad is the stacking
 of the <code>Reader</code>, <code>Writer</code>, and <code>Exception</code> monads.</p></div></div><div class="top"><p class="src"><a id="v:-60-:-62-" class="def">(&lt;:&gt;)</a> :: Semigroup e =&gt; Either e a -&gt; Either e b -&gt; Either e (a, b) <a href="src/Final.Typechecker.html#%3C%3A%3E" class="link">Source</a> <a href="#v:-60-:-62-" class="selflink">#</a></p><div class="doc"><p>The function <code><a href="Final-Typechecker.html#v:-60-:-62-" title="Final.Typechecker">&lt;:&gt;</a></code> takes two <code>Either</code> monads and returns an error if
 one of them is an error or aggregates both results. For example:</p><pre>let error = Left &quot;Error&quot; &lt;:&gt; Right 42
let errors = Left &quot;Error&quot; &lt;:&gt; Left &quot;Error2&quot;
let valid = Right &quot;42&quot; &lt;:&gt; Right &quot;0&quot;</pre><p>evaluates <code>error = Left <a href="Error.html">Error</a></code>, <code>errors = Left <a href="ErrorError2.html">ErrorError2</a></code>, and
 <code>valid = 420</code>.</p></div></div><div class="top"><p class="src"><a id="v:-60--38--62-" class="def">(&lt;&amp;&gt;)</a> :: (Semigroup e, MonadError e m) =&gt; m a -&gt; m b -&gt; m (a, b) <a href="src/Final.Typechecker.html#%3C%26%3E" class="link">Source</a> <a href="#v:-60--38--62-" class="selflink">#</a></p><div class="doc"><p>Forks two computations in the <code>Except</code> monad, and either returns both of
 their results, or aggregates the errors of one or both of the computations.
 For example:</p><pre>    (fields', methods') &lt;- forkM precheck fields &lt;&amp;&gt;
                           forkM precheck methods</pre><p>In this example, if the evaluation of <code>forkM precheck fields</code> and
 and <code>forkM precheck methods</code> return errors, we aggregate them using <code><a href="Final-Typechecker.html#v:-60-:-62-" title="Final.Typechecker">&lt;:&gt;</a></code>.
 If only one of them fails, then return the single error. If both computation
 succeed, return a monad wrapped around the tuple with both results.</p></div></div><div class="top"><p class="src"><a id="v:forkM" class="def">forkM</a> :: (Semigroup e, MonadError e m) =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b] <a href="src/Final.Typechecker.html#forkM" class="link">Source</a> <a href="#v:forkM" class="selflink">#</a></p><div class="doc"><p>Allows typechecking a list of items, collecting error messages
 from all of them.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TCErrors" class="def">TCErrors</a> <a href="src/Final.Typechecker.html#TCErrors" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></p><div class="doc"><p>Declaration of type checking errors. An error will (usually) be
 created using the helper function <code><a href="Final-Typechecker.html#v:tcError" title="Final.Typechecker">tcError</a></code>. As an example:</p><pre>tcError $ DuplicateClassError (Name &quot;Foo&quot;)</pre><p>throws an error that indicates that the class is defined multiple times.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TCErrors" class="def">TCErrors</a> (NonEmpty <a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:TCErrors" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCErrors:Show:1"></span> Show <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a></span> <a href="src/Final.Typechecker.html#line-115" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCErrors:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCErrors:Semigroup:2"></span> Semigroup <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a></span> <a href="src/Final.Typechecker.html#line-113" class="link">Source</a> <a href="#t:TCErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCErrors:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: NonEmpty <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a></p><p class="src"><a href="#v:stimes">stimes</a> :: Integral b =&gt; b -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> -&gt; <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TCError" class="def">TCError</a> <a href="src/Final.Typechecker.html#TCError" class="link">Source</a> <a href="#t:TCError" class="selflink">#</a></p><div class="doc"><p>Declaration of a type checking error, where <code><a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></code> represents
 the current type checking error and <code><a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></code> the up-to-date backtrace.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TCError" class="def">TCError</a></td><td class="doc"><p>Type checking error value constructor</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></dfn><div class="doc"><p>Current type checking error</p></div></li><li><dfn class="src"><a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></dfn><div class="doc"><p>Backtrace of the type checker</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:TCError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCError:Show:1"></span> Show <a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a></span> <a href="src/Final.Typechecker.html#line-126" class="link">Source</a> <a href="#t:TCError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCError:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Final-Typechecker.html#t:TCError" title="Final.Typechecker">TCError</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TCWarning" class="def">TCWarning</a> <a href="src/Final.Typechecker.html#TCWarning" class="link">Source</a> <a href="#t:TCWarning" class="selflink">#</a></p><div class="doc"><p>Declaration of a type checking warnings in <code><a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TCWarning" class="def">TCWarning</a> <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:TCWarning" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TCWarning:Show:1"></span> Show <a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a></span> <a href="src/Final.Typechecker.html#line-244" class="link">Source</a> <a href="#t:TCWarning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TCWarning:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Warning" class="def">Warning</a> <a href="src/Final.Typechecker.html#Warning" class="link">Source</a> <a href="#t:Warning" class="selflink">#</a></p><div class="doc"><p>Available warnings in <code><a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ShadowedVarWarning" class="def">ShadowedVarWarning</a> <a href="Final-AST.html#t:Name" title="Final.AST">Name</a></td><td class="doc"><p>Warning for shadowing a variable</p></td></tr><tr><td class="src"><a id="v:UnusedVariableWarning" class="def">UnusedVariableWarning</a> <a href="Final-AST.html#t:Name" title="Final.AST">Name</a></td><td class="doc"><p>Warning for unused variables.</p></td></tr></table></div><div class="subs instances"><details id="i:Warning" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Warning:Show:1"></span> Show <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a></span> <a href="src/Final.Typechecker.html#line-249" class="link">Source</a> <a href="#t:Warning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Warning:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:tcError" class="def">tcError</a> :: <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> a <a href="src/Final.Typechecker.html#tcError" class="link">Source</a> <a href="#v:tcError" class="selflink">#</a></p><div class="doc"><p>Returns a type checking monad, containing the error <code>err</code>.
 A common example throughout the code is the following:</p><pre>tcError $ UnknownClassError c</pre><p>The code above throws an error because the class <code>c</code> was not
 found in the environment <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:tcWarning" class="def">tcWarning</a> :: <a href="Final-Typechecker.html#t:Warning" title="Final.Typechecker">Warning</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> () <a href="src/Final.Typechecker.html#tcWarning" class="link">Source</a> <a href="#v:tcWarning" class="selflink">#</a></p><div class="doc"><p>Returns a type checking monad, containing the warning <code>wrn</code>. An example
 of the usage of <code><a href="Final-Typechecker.html#v:tcWarning" title="Final.Typechecker">tcWarning</a></code> follows:</p><pre>checkShadowing :: Name -&gt; TypecheckM ()
checkShadowing x = do
  shadow &lt;- isBound x
  when shadow $
    tcWarning $ ShadowedVarWarning x
</pre><p>In this example, the combinator <code><code><a href="Final-Typechecker.html#v:tcWarning" title="Final.Typechecker">tcWarning</a></code> ShadowedVarWarning x</code> throws
 a warning because there is a new declaration of a variable, which shadows
 an existing one.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Error" class="def">Error</a> <span class="keyword">where</span> <a href="src/Final.Typechecker.html#Error" class="link">Source</a> <a href="#t:Error" class="selflink">#</a></p><div class="doc"><p>Data declaration of available errors. Value constructors are used
 to create statically known errors. For example:</p><pre>DuplicateClassError (Name c)</pre><p>creates a <code><a href="Final-Typechecker.html#v:DuplicateClassError" title="Final.Typechecker">DuplicateClassError</a></code>. This error should be created whenever there
 is a class whose declaration is duplicated (declaration of two classes
 with the same name).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DuplicateClassError" class="def">DuplicateClassError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Declaration of two classes with the same name</p></td></tr><tr><td class="src"><a id="v:UnknownClassError" class="def">UnknownClassError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Reference of a class that does not exists</p></td></tr><tr><td class="src"><a id="v:UnknownFieldError" class="def">UnknownFieldError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Reference of a field that does not exists</p></td></tr><tr><td class="src"><a id="v:UnknownMethodError" class="def">UnknownMethodError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Reference of a method that does not exists</p></td></tr><tr><td class="src"><a id="v:UnboundVariableError" class="def">UnboundVariableError</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Unbound variable</p></td></tr><tr><td class="src"><a id="v:TypeMismatchError" class="def">TypeMismatchError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Type mismatch error, the first <code>Type p</code> refers to the formal type argument,
 the second <code>Type p</code> refers to the actual type argument.</p></td></tr><tr><td class="src"><a id="v:ImmutableFieldError" class="def">ImmutableFieldError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Immutable field error, used when someone violates immutability</p></td></tr><tr><td class="src"><a id="v:NonLValError" class="def">NonLValError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Error to indicate that a one cannot assign a value to expression <code>Expr p</code></p></td></tr><tr><td class="src"><a id="v:PrimitiveNullError" class="def">PrimitiveNullError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Error indicating that the return type cannot be <code>Null</code></p></td></tr><tr><td class="src"><a id="v:NonClassTypeError" class="def">NonClassTypeError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Used to indicate that <code>Type p</code> is not of a class type</p></td></tr><tr><td class="src"><a id="v:NonArrowTypeError" class="def">NonArrowTypeError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Expecting a function (arrow) type but got another type instead.</p></td></tr><tr><td class="src"><a id="v:ConstructorCallError" class="def">ConstructorCallError</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Tried to call a constructor outside of instantiation</p></td></tr><tr><td class="src"><a id="v:UninferrableError" class="def">UninferrableError</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></td><td class="doc"><p>Cannot infer type of <code>Expr p</code></p></td></tr></table></div><div class="subs instances"><details id="i:Error" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Error:Show:1"></span> Show <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a></span> <a href="src/Final.Typechecker.html#line-219" class="link">Source</a> <a href="#t:Error" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Error:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Final-Typechecker.html#t:Error" title="Final.Typechecker">Error</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MethodEntry" class="def">MethodEntry</a> <a href="src/Final.Typechecker.html#MethodEntry" class="link">Source</a> <a href="#t:MethodEntry" class="selflink">#</a></p><div class="doc"><p>Environment method entry. Contains method parameters and types.
 The <code><a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></code> is created during the <code><a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a></code> phase, which
 creates an Environment (symbol's table). After the <code><a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></code>
 has been created, it can be queried via helper functions, e.g.,
 <code>findMethod ty m</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MethodEntry" class="def">MethodEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:meparams" class="def">meparams</a> :: [<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:metype" class="def">metype</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:MethodEntry" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MethodEntry:Precheckable:1"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></span> <a href="src/Final.Typechecker.html#line-430" class="link">Source</a> <a href="#t:MethodEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MethodEntry:Precheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FieldEntry" class="def">FieldEntry</a> <a href="src/Final.Typechecker.html#FieldEntry" class="link">Source</a> <a href="#t:FieldEntry" class="selflink">#</a></p><div class="doc"><p>Environment field entry. Contains class' fields parameters and types.
 The <code><a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></code> is created during the <code><a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a></code> phase, which
 creates an Environment (symbol's table). After the <code><a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></code>
 has been created, it can be queried via helper functions, e.g.,
 <code>findField ty m</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FieldEntry" class="def">FieldEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:femod" class="def">femod</a> :: <a href="Final-AST.html#t:Mod" title="Final.AST">Mod</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:fetype" class="def">fetype</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:FieldEntry" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FieldEntry:Precheckable:1"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></span> <a href="src/Final.Typechecker.html#line-417" class="link">Source</a> <a href="#t:FieldEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FieldEntry:Precheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClassEntry" class="def">ClassEntry</a> <a href="src/Final.Typechecker.html#ClassEntry" class="link">Source</a> <a href="#t:ClassEntry" class="selflink">#</a></p><div class="doc"><p>Environment class entry. Contains fields parameters and methods.
 The <code><a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></code> is created during the <code><a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a></code> phase, which
 creates an Environment (symbol's table). After the <code><a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></code>
 has been created, it can be queried via helper functions, e.g.,
 <code>findClass ty m</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClassEntry" class="def">ClassEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cefields" class="def">cefields</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cemethods" class="def">cemethods</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ClassEntry" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ClassEntry:Precheckable:1"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></span> <a href="src/Final.Typechecker.html#line-437" class="link">Source</a> <a href="#t:ClassEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ClassEntry:Precheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Env" class="def">Env</a> <a href="src/Final.Typechecker.html#Env" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></p><div class="doc"><p>Environment form from the <code><a href="Final-Typechecker.html#v:PreEnv" title="Final.Typechecker">PreEnv</a></code> (pre-environment) and the <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>
 (environment). The <code><a href="Final-Typechecker.html#v:PreEnv" title="Final.Typechecker">PreEnv</a></code> contains a simple list of class names and is used
 to simply lookup whether a class name has already been defined, before the type
 checking phase. The <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code> is used during type checking, and is updated as
 the type checker runs. Most likely, one uses the <code>Reader</code> monad to hide details
 of how the environment is updated, via the common <code>local</code> function.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PreEnv" class="def">PreEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:classes" class="def">classes</a> :: [<a href="Final-AST.html#t:Name" title="Final.AST">Name</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:bt" class="def">bt</a> :: <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Env" class="def">Env</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ctable" class="def">ctable</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:vartable" class="def">vartable</a> :: Map <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:bt" class="def">bt</a> :: <a href="Final-AST.html#t:Backtrace" title="Final.AST">Backtrace</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:constructor" class="def">constructor</a> :: Bool</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:setConstructor" class="def">setConstructor</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#setConstructor" class="link">Source</a> <a href="#v:setConstructor" class="selflink">#</a></p><div class="doc"><p>Conditionally update the environment to track if we are in a
 constructor method.</p></div></div><div class="top"><p class="src"><a id="v:pushBT" class="def">pushBT</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> a =&gt; a -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#pushBT" class="link">Source</a> <a href="#v:pushBT" class="selflink">#</a></p><div class="doc"><p>This is a helper to update the backtrace node in the environment <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.
 Usually not relevant for the developer of the compiler. Its main use case
 is during <code><a href="Final-Typechecker.html#v:precheck" title="Final.Typechecker">precheck</a></code> function:</p><pre>precheck x = local (pushBT x) $ doPrecheck x</pre><p>which updates the backtrace of an <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lookupClass" class="def">lookupClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Maybe <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#lookupClass" class="link">Source</a> <a href="#v:lookupClass" class="selflink">#</a></p><div class="doc"><p>Helper function to lookup a class given a <code><a href="Final-AST.html#t:Name" title="Final.AST">Name</a></code> and an <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>. Usually
 it relies on the <code>Reader</code> monad, so that passing the <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code> can be omitted.
 For example:</p><pre>findClass :: Type p -&gt; TypecheckM ClassEntry
findClass (ClassType c) = do
  cls &lt;- asks $ lookupClass c
  case cls of
    Just cdef -&gt; return cdef
    Nothing -&gt; tcError $ UnknownClassError c
findClass ty = tcError $ NonClassTypeError ty</pre><p>In this function (<code><a href="Final-Typechecker.html#v:findClass" title="Final.Typechecker">findClass</a></code>), the <code>Reader</code> function <code>asks</code> will inject
 the <code>Reader</code> monad as the last argument. More details in the paper.</p></div></div><div class="top"><p class="src"><a id="v:validClass" class="def">validClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Bool <a href="src/Final.Typechecker.html#validClass" class="link">Source</a> <a href="#v:validClass" class="selflink">#</a></p><div class="doc"><p>Check whether the name exists in the list of classes in the <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lookupVar" class="def">lookupVar</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; Maybe (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#lookupVar" class="link">Source</a> <a href="#v:lookupVar" class="selflink">#</a></p><div class="doc"><p>Look up a variable by its <code><a href="Final-AST.html#t:Name" title="Final.AST">Name</a></code> in the <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>, returning an option type
 indicating whether the variable was found or not.</p></div></div><div class="top"><p class="src"><a id="v:resolveClass" class="def">resolveClass</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#resolveClass" class="link">Source</a> <a href="#v:resolveClass" class="selflink">#</a></p><div class="doc"><p>Lookup a <code><a href="Final-AST.html#t:Name" title="Final.AST">Name</a></code>, returning either an error or its type
 in the <code><a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a></code> monad</p></div></div><div class="top"><p class="src"><a id="v:findClass" class="def">findClass</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#findClass" class="link">Source</a> <a href="#v:findClass" class="selflink">#</a></p><div class="doc"><p>Find a class declaration by its <code><a href="Final-AST.html#t:Type" title="Final.AST">Type</a></code></p></div></div><div class="top"><p class="src"><a id="v:findMethod" class="def">findMethod</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a> <a href="src/Final.Typechecker.html#findMethod" class="link">Source</a> <a href="#v:findMethod" class="selflink">#</a></p><div class="doc"><p>Find a method declaration by its <code><a href="Final-AST.html#t:Type" title="Final.AST">Type</a></code> and method name <code>m</code></p></div></div><div class="top"><p class="src"><a id="v:findField" class="def">findField</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a> <a href="src/Final.Typechecker.html#findField" class="link">Source</a> <a href="#v:findField" class="selflink">#</a></p><div class="doc"><p>Find a field declaration by its <code><a href="Final-AST.html#t:Type" title="Final.AST">Type</a></code> (<code>ty</code>) and field name <code>f</code></p></div></div><div class="top"><p class="src"><a id="v:findVar" class="def">findVar</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#findVar" class="link">Source</a> <a href="#v:findVar" class="selflink">#</a></p><div class="doc"><p>Find a variable in the environment by its name <code>x</code></p></div></div><div class="top"><p class="src"><a id="v:isBound" class="def">isBound</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> Bool <a href="src/Final.Typechecker.html#isBound" class="link">Source</a> <a href="#v:isBound" class="selflink">#</a></p><div class="doc"><p>Check whether a variable name is bound</p></div></div><div class="top"><p class="src"><a id="v:generatePreEnv" class="def">generatePreEnv</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> p -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#generatePreEnv" class="link">Source</a> <a href="#v:generatePreEnv" class="selflink">#</a></p><div class="doc"><p>Generate the pre-enviroment, that is, get the top level declaration of
 classes, methods and fields.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Precheckable" class="def">Precheckable</a> a b | a -&gt; b <span class="keyword">where</span> <a href="src/Final.Typechecker.html#Precheckable" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></p><div class="doc"><p>The type class defines how to precheck an AST node.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Final-Typechecker.html#v:doPrecheck" title="Final.Typechecker">doPrecheck</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:doPrecheck" class="def">doPrecheck</a> :: a -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> b <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><div class="doc"><p>Precheck an AST node</p></div><p class="src"><a id="v:precheck" class="def">precheck</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> a =&gt; a -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> b <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p><div class="doc"><p>Precheck an AST, updating the environment's backtrace.</p></div></div><div class="subs instances"><details id="i:Precheckable" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Precheckable:Precheckable:1"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a></span> <a href="src/Final.Typechecker.html#line-430" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Precheckable:Precheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:MethodEntry" title="Final.Typechecker">MethodEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Precheckable:Precheckable:2"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a></span> <a href="src/Final.Typechecker.html#line-417" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Precheckable:Precheckable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:FieldEntry" title="Final.Typechecker">FieldEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Precheckable:Precheckable:3"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a></span> <a href="src/Final.Typechecker.html#line-437" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Precheckable:Precheckable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:ClassEntry" title="Final.Typechecker">ClassEntry</a> <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Precheckable:Precheckable:4"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</span> <a href="src/Final.Typechecker.html#line-424" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Precheckable:Precheckable:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Precheckable:Precheckable:5"></span> <a href="Final-Typechecker.html#t:Precheckable" title="Final.Typechecker">Precheckable</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p) (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>)</span> <a href="src/Final.Typechecker.html#line-407" class="link">Source</a> <a href="#t:Precheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Precheckable:Precheckable:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doPrecheck">doPrecheck</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doPrecheck" class="link">Source</a> <a href="#v:doPrecheck" class="selflink">#</a></p><p class="src"><a href="#v:precheck">precheck</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> p -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#precheck" class="link">Source</a> <a href="#v:precheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:generateEnvironment" class="def">generateEnvironment</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#generateEnvironment" class="link">Source</a> <a href="#v:generateEnvironment" class="selflink">#</a></p><div class="doc"><p>Environment generation from a parsed AST program.</p></div></div><div class="top"><p class="src"><a id="v:addVariable" class="def">addVariable</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#addVariable" class="link">Source</a> <a href="#v:addVariable" class="selflink">#</a></p><div class="doc"><p>Add a variable name and its type to the environment <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:addParameters" class="def">addParameters</a> :: [<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>] -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> -&gt; <a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a> <a href="src/Final.Typechecker.html#addParameters" class="link">Source</a> <a href="#v:addParameters" class="selflink">#</a></p><div class="doc"><p>Add a list of parameters, <code><a href="Final-AST.html#t:Param" title="Final.AST">Param</a></code>, to the environment.</p></div></div><div class="top"><p class="src"><a id="v:tcProgram" class="def">tcProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; Either <a href="Final-Typechecker.html#t:TCErrors" title="Final.Typechecker">TCErrors</a> (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>, [<a href="Final-Typechecker.html#t:TCWarning" title="Final.Typechecker">TCWarning</a>]) <a href="src/Final.Typechecker.html#tcProgram" class="link">Source</a> <a href="#v:tcProgram" class="selflink">#</a></p><div class="doc"><p>Main entry point of the type checker. This function type checks an AST
 returning either a list of errors or a program and its warnings. For instance,
 assuming the following made up language:
 &gt;
 &gt; class C
 &gt;   val f: Foo
 &gt;</p><p>it should be parsed to generate the following AST:</p><pre>testClass1 =
 ClassDef {cname = &quot;C&quot;
          ,fields = [FieldDef {fmod = Val, fname = &quot;f&quot;, ftype = ClassType &quot;Foo&quot;}]
          ,methods = []}
</pre><p>To type check the AST, run the <code><a href="Final-Typechecker.html#v:tcProgram" title="Final.Typechecker">tcProgram</a></code> combinator as follows:</p><pre>tcProgram testClass1</pre><p>which either returns errors or the resulting typed AST and its warnings.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Typecheckable" class="def">Typecheckable</a> a b | a -&gt; b <span class="keyword">where</span> <a href="src/Final.Typechecker.html#Typecheckable" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></p><div class="doc"><p>The type class defines how to type check an AST node.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Final-Typechecker.html#v:doTypecheck" title="Final.Typechecker">doTypecheck</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:doTypecheck" class="def">doTypecheck</a> :: a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (b <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><div class="doc"><p>Type check the well-formedness of an AST node.</p></div><p class="src"><a id="v:typecheck" class="def">typecheck</a> :: <a href="Final-AST.html#t:Backtraceable" title="Final.AST">Backtraceable</a> (a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>) =&gt; a <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (b <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p><div class="doc"><p>Type check an AST node, updating the environment's backtrace.</p></div></div><div class="subs instances"><details id="i:Typecheckable" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:1"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-577" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:2"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-535" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:MethodDef" title="Final.AST">MethodDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:3"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-530" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Param" title="Final.AST">Param</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:4"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-525" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:FieldDef" title="Final.AST">FieldDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:5"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-516" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:6"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-513" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Typecheckable:Typecheckable:7"></span> <a href="Final-Typechecker.html#t:Typecheckable" title="Final.Typechecker">Typecheckable</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> :: <a href="Final-AST.html#t:Phase" title="Final.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/Final.Typechecker.html#line-510" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Typecheckable:Typecheckable:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Final-Typechecker.html">Final.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:doTypecheck">doTypecheck</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#doTypecheck" class="link">Source</a> <a href="#v:doTypecheck" class="selflink">#</a></p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:checkShadowing" class="def">checkShadowing</a> :: <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> () <a href="src/Final.Typechecker.html#checkShadowing" class="link">Source</a> <a href="#v:checkShadowing" class="selflink">#</a></p><div class="doc"><p>Check whether a name shadows an existing variable name. For example:</p><pre>checkShadowing name</pre><p>checks whether <code>name</code> shadows an existing variable from <code><a href="Final-Typechecker.html#t:Env" title="Final.Typechecker">Env</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:checkVariableUsage" class="def">checkVariableUsage</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> p -&gt; <a href="Final-AST.html#t:Name" title="Final.AST">Name</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> () <a href="src/Final.Typechecker.html#checkVariableUsage" class="link">Source</a> <a href="#v:checkVariableUsage" class="selflink">#</a></p><div class="doc"><p>Check whether the variable has been used or not. Throw a warning
 if the variable is not used. For example:</p><pre>checkVariableUsage body name</pre><p>This example checks whether the variable <code>name</code> is used in the
 AST node <code>body</code>, returning a warning if it is not used.</p></div></div><div class="top"><p class="src"><a id="v:hasType" class="def">hasType</a> :: <a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> -&gt; <a href="Final-AST.html#t:Type" title="Final.AST">Type</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a> -&gt; <a href="Final-Typechecker.html#t:TypecheckM" title="Final.Typechecker">TypecheckM</a> (<a href="Final-AST.html#t:Expr" title="Final.AST">Expr</a> <a href="Final-AST.html#v:Checked" title="Final.AST">Checked</a>) <a href="src/Final.Typechecker.html#hasType" class="link">Source</a> <a href="#v:hasType" class="selflink">#</a></p><div class="doc"><p>This combinator is used whenever a certain type is expected. This function
 is quite important. Here follows an example:</p><pre>doTypecheck MethodDef {mname, mparams, mbody, mtype} = do
  (mparams', mtype') &lt;- forkM typecheck mparams &lt;&amp;&gt;
                         typecheck mtype
  -- extend environment with method parameters and typecheck body
  mbody' &lt;- local (addParameters mparams') $ hasType mbody mtype'</pre><p>in the last line we are type checking a method declaration, and
 it is statically known what should be the return type of the function body. In these
 cases, one should use the <code><a href="Final-Typechecker.html#v:hasType" title="Final.Typechecker">hasType</a></code> combinator.</p></div></div><div class="top"><p class="src"><a id="v:testClass1" class="def">testClass1</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> ip <a href="src/Final.Typechecker.html#testClass1" class="link">Source</a> <a href="#v:testClass1" class="selflink">#</a></p><div class="doc"><p>Test programs of a class with a single field.
 This program is the AST equivalent of the following syntax:</p><pre>class C
  val f: Foo
</pre></div></div><div class="top"><p class="src"><a id="v:testClass2" class="def">testClass2</a> :: <a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> <a href="src/Final.Typechecker.html#testClass2" class="link">Source</a> <a href="#v:testClass2" class="selflink">#</a></p><div class="doc"><p>Test program with a class, field, method, and variable access. The class <code>Bar</code>
 does not exist in the environment. The variable access is unbound.</p><p>This program is the AST equivalent of the following syntax:</p><pre>class D
  val g: Bar
  def m(): Int
    x</pre></div></div><div class="top"><p class="src"><a id="v:testClass3" class="def">testClass3</a> :: [<a href="Final-AST.html#t:ClassDef" title="Final.AST">ClassDef</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a>] <a href="src/Final.Typechecker.html#testClass3" class="link">Source</a> <a href="#v:testClass3" class="selflink">#</a></p><div class="doc"><p>Test program with a two classes, field, method, and variable access. The class
 declaration are duplicated.</p><p>This program is the AST equivalent of the following syntax:</p><pre>class D
  val g: Bar
  def m(): Int
    x

class D
  val g: Bar
  def m(): Int
    x</pre></div></div><div class="top"><p class="src"><a id="v:testProgram" class="def">testProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> <a href="src/Final.Typechecker.html#testProgram" class="link">Source</a> <a href="#v:testProgram" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:testValidProgram" class="def">testValidProgram</a> :: <a href="Final-AST.html#t:Program" title="Final.AST">Program</a> <a href="Final-AST.html#v:Parsed" title="Final.AST">Parsed</a> <a href="src/Final.Typechecker.html#testValidProgram" class="link">Source</a> <a href="#v:testValidProgram" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>