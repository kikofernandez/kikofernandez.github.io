<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>PhantomFunctors.AST</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/PhantomFunctors.AST.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2019 Elias Castegren and Kiko Fernandez-Reyes</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">PhantomFunctors.AST</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">AST declarations</a></li><li><a href="#g:2">Helper functions</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module includes functionality for creating an Abstract Syntax Tree (AST),
 as well as helper functions for checking different
 aspects of the AST. The AST abstract over their kind <code><a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a></code>, where
 <code><a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a></code> represent the current state of the AST. For example, after parsing
 the AST is of <code><a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a></code> <code>Phase</code>; after type checking with <code><a href="PhantomFunctors.html#v:tcProgram" title="PhantomFunctors">tcProgram</a></code> the
 returned AST is of <code><a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a></code> <code>Phase</code>, indicating that the AST has been
 type checked.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Name">Name</a> = String</li><li class="src short"><a href="#v:isConstructorName">isConstructorName</a> :: [Char] -&gt; Bool</li><li class="src short"><span class="keyword">data</span> <a href="#t:Type">Type</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f)<ul class="subs"><li>= <a href="#v:ClassType">ClassType</a> <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li>| <a href="#v:IntType">IntType</a></li><li>| <a href="#v:BoolType">BoolType</a></li><li>| <a href="#v:Arrow">Arrow</a> { <ul class="subs"><li><a href="#v:tparams">tparams</a> :: [<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p]</li><li><a href="#v:tresult">tresult</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</li></ul> }</li><li>| <a href="#v:UnitType">UnitType</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Program">Program</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) = <a href="#v:Program">Program</a> [<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Phase">Phase</a> (f :: * -&gt; *) <span class="keyword">where</span><ul class="subs"><li><a href="#v:Parsed">Parsed</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Proxy</li><li><a href="#v:Checked">Checked</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ClassDef">ClassDef</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) = <a href="#v:ClassDef">ClassDef</a> {<ul class="subs"><li><a href="#v:cname">cname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:fields">fields</a> :: [<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> ip]</li><li><a href="#v:methods">methods</a> :: [<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip]</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Mod">Mod</a><ul class="subs"><li>= <a href="#v:Var">Var</a></li><li>| <a href="#v:Val">Val</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FieldDef">FieldDef</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) = <a href="#v:FieldDef">FieldDef</a> {<ul class="subs"><li><a href="#v:fname">fname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:ftype">ftype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</li><li><a href="#v:fmod">fmod</a> :: <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a></li></ul>}</li><li class="src short"><a href="#v:isValField">isValField</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; Bool</li><li class="src short"><a href="#v:isVarField">isVarField</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; Bool</li><li class="src short"><span class="keyword">data</span> <a href="#t:Param">Param</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) = <a href="#v:Param">Param</a> {<ul class="subs"><li><a href="#v:pname">pname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:ptype">ptype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:MethodDef">MethodDef</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) = <a href="#v:MethodDef">MethodDef</a> {<ul class="subs"><li><a href="#v:mname">mname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:mparams">mparams</a> :: [<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> ip]</li><li><a href="#v:mtype">mtype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> ip</li><li><a href="#v:mbody">mbody</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> ip</li></ul>}</li><li class="src short"><a href="#v:commaSep">commaSep</a> :: Show t =&gt; [t] -&gt; String</li><li class="src short"><span class="keyword">data</span> <a href="#t:Op">Op</a><ul class="subs"><li>= <a href="#v:Add">Add</a></li><li>| <a href="#v:Sub">Sub</a></li><li>| <a href="#v:Mul">Mul</a></li><li>| <a href="#v:Div">Div</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Expr">Expr</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f)<ul class="subs"><li>= <a href="#v:BoolLit">BoolLit</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:bval">bval</a> :: Bool</li></ul> }</li><li>| <a href="#v:IntLit">IntLit</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:ival">ival</a> :: Int</li></ul> }</li><li>| <a href="#v:Null">Null</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li></ul> }</li><li>| <a href="#v:Lambda">Lambda</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:params">params</a> :: [<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p]</li><li><a href="#v:body">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li></ul> }</li><li>| <a href="#v:VarAccess">VarAccess</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:name">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li></ul> }</li><li>| <a href="#v:FieldAccess">FieldAccess</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:target">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:name">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li></ul> }</li><li>| <a href="#v:Assignment">Assignment</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:lhs">lhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:rhs">rhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li></ul> }</li><li>| <a href="#v:MethodCall">MethodCall</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:target">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:name">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:args">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</li></ul> }</li><li>| <a href="#v:FunctionCall">FunctionCall</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:target">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:args">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</li></ul> }</li><li>| <a href="#v:If">If</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:cond">cond</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:thn">thn</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:els">els</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li></ul> }</li><li>| <a href="#v:Let">Let</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:name">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li><a href="#v:val">val</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:body">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li></ul> }</li><li>| <a href="#v:BinOp">BinOp</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:op">op</a> :: <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a></li><li><a href="#v:lhs">lhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:rhs">rhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li></ul> }</li><li>| <a href="#v:New">New</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:ty">ty</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</li><li><a href="#v:args">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</li></ul> }</li><li>| <a href="#v:Cast">Cast</a> { <ul class="subs"><li><a href="#v:etype">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</li><li><a href="#v:body">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</li><li><a href="#v:ty">ty</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</li></ul> }</li></ul></li><li class="src short"><a href="#v:thisName">thisName</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></li><li class="src short"><a href="#v:isArrowType">isArrowType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool</li><li class="src short"><a href="#v:isFieldAccess">isFieldAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool</li><li class="src short"><a href="#v:isVarAccess">isVarAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool</li><li class="src short"><a href="#v:isThisAccess">isThisAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool</li><li class="src short"><a href="#v:isLVal">isLVal</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool</li><li class="src short"><a href="#v:isClassType">isClassType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool</li><li class="src short"><a href="#v:getType">getType</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a></li><li class="src short"><a href="#v:setType">setType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Name" class="def">Name</a> = String <a href="src/PhantomFunctors.AST.html#Name" class="link">Source</a> <a href="#t:Name" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isConstructorName" class="def">isConstructorName</a> :: [Char] -&gt; Bool <a href="src/PhantomFunctors.AST.html#isConstructorName" class="link">Source</a> <a href="#v:isConstructorName" class="selflink">#</a></p><div class="doc"><p>Check if a name is a constructor name</p></div></div><a href="#g:1" id="g:1"><h1>AST declarations</h1></a><div class="doc"><p>Declaration for the Abstract Syntax Tree of the language. This section
 contains the type, class, methods, fields and expressions represented
 as an AST. The AST is produced by a parser. For more information on
 building parsers, we recommend to read
  <a href="https://hackage.haskell.org/package/megaparsec-7.0.5">megaparsec</a>.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Type" class="def">Type</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#Type" class="link">Source</a> <a href="#t:Type" class="selflink">#</a></p><div class="doc"><p>Representation of types abstracting over the <code><a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a></code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClassType" class="def">ClassType</a> <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></td><td class="doc"><p>Represents a class of name <code><a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></code></p></td></tr><tr><td class="src"><a id="v:IntType" class="def">IntType</a></td><td class="doc"><p>Represents integers</p></td></tr><tr><td class="src"><a id="v:BoolType" class="def">BoolType</a></td><td class="doc"><p>Represents booleans</p></td></tr><tr><td class="src"><a id="v:Arrow" class="def">Arrow</a></td><td class="doc"><p>Represents a function type</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tparams" class="def">tparams</a> :: [<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tresult" class="def">tresult</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:UnitType" class="def">UnitType</a></td><td class="doc"><p>Represents the unit (void) type</p></td></tr></table></div><div class="subs instances"><details id="i:Type" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Type:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-314" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Type:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Type:Eq:2"></span> Eq (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</span> <a href="src/PhantomFunctors.AST.html#line-51" class="link">Source</a> <a href="#t:Type" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Type:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Type:Show:3"></span> Show (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</span> <a href="src/PhantomFunctors.AST.html#line-53" class="link">Source</a> <a href="#t:Type" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Type:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Program" class="def">Program</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#Program" class="link">Source</a> <a href="#t:Program" class="selflink">#</a></p><div class="doc"><p>The representation of a program in the form of an AST node.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Program" class="def">Program</a> [<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip]</td><td class="doc"><p>Programs are simply a list of class definitions (<code><a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a></code>) in a certain <code><a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a></code></p></td></tr></table></div><div class="subs instances"><details id="i:Program" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Program:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-326" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Program:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Program:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> ip)</span> <a href="src/PhantomFunctors.AST.html#line-63" class="link">Source</a> <a href="#t:Program" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Program:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> ip -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> ip -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Program" title="PhantomFunctors.AST">Program</a> ip] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Phase" class="def">Phase</a> (f :: * -&gt; *) <span class="keyword">where</span> <a href="src/PhantomFunctors.AST.html#Phase" class="link">Source</a> <a href="#t:Phase" class="selflink">#</a></p><div class="doc"><p>Phases that have already been passed. This has been thought as going
 through different phases of a compiler. We assume that there is a total order
 between phases.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Parsed" class="def">Parsed</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Proxy</dfn><div class="doc"><p>Initial status of an AST node after parsing</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Checked" class="def">Checked</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity</dfn><div class="doc"><p>Status of an AST node after type checking</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClassDef" class="def">ClassDef</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#ClassDef" class="link">Source</a> <a href="#t:ClassDef" class="selflink">#</a></p><div class="doc"><p>A representation of a class in the form of an AST node. As an example:</p><pre>class Foo:
  val x: Int
  var y: Bool
  def main(): Int
    42</pre><p>the code above, after parsing, would generate the following AST:</p><pre>ClassDef {cname = &quot;Foo&quot;
         ,fields = [FieldDef {fname = &quot;x&quot;
                             ,ftype = IntType
                             ,fmod = Val}]
         ,methods = [MethodDef {mname = &quot;main&quot;
                               ,mparams = []
                               ,mtype = IntType
                               ,mbody = [IntLit {etype = Proxy, ival = 42}]
                               }]}</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClassDef" class="def">ClassDef</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cname" class="def">cname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>String that represents the name of the class</p></div></li><li><dfn class="src"><a id="v:fields" class="def">fields</a> :: [<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> ip]</dfn><div class="doc"><p>List of field definitions of a class</p></div></li><li><dfn class="src"><a id="v:methods" class="def">methods</a> :: [<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip]</dfn><div class="doc"><p>List of method definitions of a class</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ClassDef" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ClassDef:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-329" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ClassDef:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ClassDef:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip)</span> <a href="src/PhantomFunctors.AST.html#line-97" class="link">Source</a> <a href="#t:ClassDef" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ClassDef:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:ClassDef" title="PhantomFunctors.AST">ClassDef</a> ip] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Mod" class="def">Mod</a> <a href="src/PhantomFunctors.AST.html#Mod" class="link">Source</a> <a href="#t:Mod" class="selflink">#</a></p><div class="doc"><p>Field qualifiers in a class. It is thought for a made up syntax such as:</p><pre>class Foo:
  val x: Int
  var y: Bool</pre><p>This indicates that the variable <code>x</code> is immutable, and <code>y</code> can be mutated.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Var" class="def">Var</a></td><td class="doc"><p>Indicates that the field can be mutated</p></td></tr><tr><td class="src"><a id="v:Val" class="def">Val</a></td><td class="doc"><p>Indicates that the field is immutable</p></td></tr></table></div><div class="subs instances"><details id="i:Mod" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Mod:Eq:1"></span> Eq <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a></span> <a href="src/PhantomFunctors.AST.html#line-112" class="link">Source</a> <a href="#t:Mod" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Mod:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Mod:Show:2"></span> Show <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a></span> <a href="src/PhantomFunctors.AST.html#line-114" class="link">Source</a> <a href="#t:Mod" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Mod:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FieldDef" class="def">FieldDef</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#FieldDef" class="link">Source</a> <a href="#t:FieldDef" class="selflink">#</a></p><div class="doc"><p>Representation of a field declaration in the form of an AST node.
 As an example, the following code:</p><pre>class Foo:
  val x: Int</pre><p>could be parsed to the following field representation:</p><pre>FieldDef {fname = &quot;x&quot;
         ,ftype = IntType
         ,fmod = Val}</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FieldDef" class="def">FieldDef</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:fname" class="def">fname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Name of the field name</p></div></li><li><dfn class="src"><a id="v:ftype" class="def">ftype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</dfn><div class="doc"><p>Type of the field</p></div></li><li><dfn class="src"><a id="v:fmod" class="def">fmod</a> :: <a href="PhantomFunctors-AST.html#t:Mod" title="PhantomFunctors.AST">Mod</a></dfn><div class="doc"><p>Field qualifier</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:FieldDef" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FieldDef:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-337" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FieldDef:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FieldDef:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p)</span> <a href="src/PhantomFunctors.AST.html#line-144" class="link">Source</a> <a href="#t:FieldDef" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FieldDef:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:isValField" class="def">isValField</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isValField" class="link">Source</a> <a href="#v:isValField" class="selflink">#</a></p><div class="doc"><p>Helper function to check whether a <code><a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a></code> is immutable.</p></div></div><div class="top"><p class="src"><a id="v:isVarField" class="def">isVarField</a> :: <a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isVarField" class="link">Source</a> <a href="#v:isVarField" class="selflink">#</a></p><div class="doc"><p>Helper function to check whether a <code><a href="PhantomFunctors-AST.html#t:FieldDef" title="PhantomFunctors.AST">FieldDef</a></code> is mutable.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Param" class="def">Param</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#Param" class="link">Source</a> <a href="#t:Param" class="selflink">#</a></p><div class="doc"><p>Representation of parameters in the form of an AST.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Param" class="def">Param</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:pname" class="def">pname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Name of the parameter</p></div></li><li><dfn class="src"><a id="v:ptype" class="def">ptype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</dfn><div class="doc"><p>Type of the parameter</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Param" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Param:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-342" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Param:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Param:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p)</span> <a href="src/PhantomFunctors.AST.html#line-153" class="link">Source</a> <a href="#t:Param" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Param:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MethodDef" class="def">MethodDef</a> (ip :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#MethodDef" class="link">Source</a> <a href="#t:MethodDef" class="selflink">#</a></p><div class="doc"><p>Representation of a method declaration in the form of an AST. For example:</p><pre>class Foo:
  def main(): Int
    42</pre><p>the code above, after parsing, would generate the following AST:</p><pre>ClassDef {cname = &quot;Foo&quot;
         ,fields = []
         ,methods = [MethodDef {mname = &quot;main&quot;
                               ,mparams = []
                               ,mtype = IntType
                               ,mbody = [IntLit {etype = Proxy, ival = 42}]
                               }]}</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MethodDef" class="def">MethodDef</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:mname" class="def">mname</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Name of the method definition</p></div></li><li><dfn class="src"><a id="v:mparams" class="def">mparams</a> :: [<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> ip]</dfn><div class="doc"><p>List of arguments to the method</p></div></li><li><dfn class="src"><a id="v:mtype" class="def">mtype</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> ip</dfn><div class="doc"><p>Return type</p></div></li><li><dfn class="src"><a id="v:mbody" class="def">mbody</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> ip</dfn><div class="doc"><p>Body of the method</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:MethodDef" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MethodDef:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-347" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MethodDef:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MethodDef:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip)</span> <a href="src/PhantomFunctors.AST.html#line-184" class="link">Source</a> <a href="#t:MethodDef" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MethodDef:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:MethodDef" title="PhantomFunctors.AST">MethodDef</a> ip] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:commaSep" class="def">commaSep</a> :: Show t =&gt; [t] -&gt; String <a href="src/PhantomFunctors.AST.html#commaSep" class="link">Source</a> <a href="#v:commaSep" class="selflink">#</a></p><div class="doc"><p>Takes a list of things that can be shown, and creates a comma
 separated string.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Op" class="def">Op</a> <a href="src/PhantomFunctors.AST.html#Op" class="link">Source</a> <a href="#t:Op" class="selflink">#</a></p><div class="doc"><p>Representation of integer operations</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Add" class="def">Add</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Sub" class="def">Sub</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Mul" class="def">Mul</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Div" class="def">Div</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Op" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Op:Eq:1"></span> Eq <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a></span> <a href="src/PhantomFunctors.AST.html#line-190" class="link">Source</a> <a href="#t:Op" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Op:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Op:Show:2"></span> Show <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a></span> <a href="src/PhantomFunctors.AST.html#line-192" class="link">Source</a> <a href="#t:Op" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Op:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Expr" class="def">Expr</a> (p :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> f) <a href="src/PhantomFunctors.AST.html#Expr" class="link">Source</a> <a href="#t:Expr" class="selflink">#</a></p><div class="doc"><p>Representation of expressions in the form of an AST node. The language
 is expression-based, so there are no statements. As an example, the following
 identity function:</p><pre>let id = \x: Int -&gt; x
in id 42</pre><p>generates this <code><a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a></code>:</p><pre>Let {etype = Proxy
    ,name = &quot;id&quot;
    ,val = Lambda {etype = Proxy
                  ,params = [Param &quot;x&quot; IntType]
                  ,body =   FunctionCall {etype = Proxy
                                         ,target = VarAccess Proxy &quot;id&quot;
                                         ,args = [IntLit Proxy 42]}
                  }
    ,body  :: Expr p
    }
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BoolLit" class="def">BoolLit</a></td><td class="doc"><p>Representation of a boolean literal</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:bval" class="def">bval</a> :: Bool</dfn><div class="doc"><p>The <a href="Haskell.html">Haskell</a> <code>Bool</code> data constructor</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:IntLit" class="def">IntLit</a></td><td class="doc"><p>Representation of an integer literal</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:ival" class="def">ival</a> :: Int</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Null" class="def">Null</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Lambda" class="def">Lambda</a></td><td class="doc"><p>Representation of a lambda expression</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:params" class="def">params</a> :: [<a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a> p]</dfn><div class="doc"><p>List of arguments with their types (<code><a href="PhantomFunctors-AST.html#t:Param" title="PhantomFunctors.AST">Param</a></code>)</p></div></li><li><dfn class="src"><a id="v:body" class="def">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The body of the lambda abstraction</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:VarAccess" class="def">VarAccess</a></td><td class="doc"><p>Representation of a variable access</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:name" class="def">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Variable name</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:FieldAccess" class="def">FieldAccess</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:target" class="def">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The target in a field access, e.g., <code>x.foo</code>, then <code>x</code> is the target.</p></div></li><li><dfn class="src"><a id="v:name" class="def">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Variable name</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Assignment" class="def">Assignment</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:lhs" class="def">lhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>Left-hand side expression</p></div></li><li><dfn class="src"><a id="v:rhs" class="def">rhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>Right-hand side expression</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:MethodCall" class="def">MethodCall</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:target" class="def">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The target in a field access, e.g., <code>x.foo</code>, then <code>x</code> is the target.</p></div></li><li><dfn class="src"><a id="v:name" class="def">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Variable name</p></div></li><li><dfn class="src"><a id="v:args" class="def">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</dfn><div class="doc"><p>The arguments of the method call</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:FunctionCall" class="def">FunctionCall</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:target" class="def">target</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The target in a field access, e.g., <code>x.foo</code>, then <code>x</code> is the target.</p></div></li><li><dfn class="src"><a id="v:args" class="def">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</dfn><div class="doc"><p>The arguments of the method call</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:If" class="def">If</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:cond" class="def">cond</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The condition in the <code>if-else</code> expression</p></div></li><li><dfn class="src"><a id="v:thn" class="def">thn</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The body of the <code>then</code> branch</p></div></li><li><dfn class="src"><a id="v:els" class="def">els</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The body of the <code>else</code> branch</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Let" class="def">Let</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:name" class="def">name</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a></dfn><div class="doc"><p>Variable name</p></div></li><li><dfn class="src"><a id="v:val" class="def">val</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>Expression that will bound variable <code>name</code> with value <code>val</code></p></div></li><li><dfn class="src"><a id="v:body" class="def">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The body of the lambda abstraction</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:BinOp" class="def">BinOp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:op" class="def">op</a> :: <a href="PhantomFunctors-AST.html#t:Op" title="PhantomFunctors.AST">Op</a></dfn><div class="doc"><p>Binary operation</p></div></li><li><dfn class="src"><a id="v:lhs" class="def">lhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>Left-hand side expression</p></div></li><li><dfn class="src"><a id="v:rhs" class="def">rhs</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>Right-hand side expression</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:New" class="def">New</a></td><td class="doc"><p>It is useful to decouple the type of the expression from the type of the
   instantiated class. This distinction becomes important whenever we have
   subtyping, e.g., an interface <code>Animal</code> where `Animal x = new Dog`</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:ty" class="def">ty</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</dfn><div class="doc"><p>The class that one instantiates, e.g., `new C`</p></div></li><li><dfn class="src"><a id="v:args" class="def">args</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p]</dfn><div class="doc"><p>The arguments of the method call</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Cast" class="def">Cast</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:etype" class="def">etype</a> :: f (<a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p)</dfn><div class="doc"><p>Type of the expression</p></div></li><li><dfn class="src"><a id="v:body" class="def">body</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p</dfn><div class="doc"><p>The body of the lambda abstraction</p></div></li><li><dfn class="src"><a id="v:ty" class="def">ty</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p</dfn><div class="doc"><p>The class that one instantiates, e.g., `new C`</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Expr" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Expr:Typecheckable:1"></span> <a href="PhantomFunctors-Typechecker.html#t:Typecheckable" title="PhantomFunctors.Typechecker">Typecheckable</a> (<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> (Proxy :: Type -&gt; Type) -&gt; Type) (<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> :: <a href="PhantomFunctors-AST.html#t:Phase" title="PhantomFunctors.AST">Phase</a> Identity -&gt; Type)</span> <a href="src/PhantomFunctors.Typechecker.html#line-361" class="link">Source</a> <a href="#t:Typecheckable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Expr:Typecheckable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-Typechecker.html">PhantomFunctors.Typechecker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typecheck">typecheck</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Parsed" title="PhantomFunctors.AST">Parsed</a> -&gt; <a href="PhantomFunctors-Typechecker.html#t:TypecheckM" title="PhantomFunctors.Typechecker">TypecheckM</a> (<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a>) <a href="src/PhantomFunctors.Typechecker.html#typecheck" class="link">Source</a> <a href="#v:typecheck" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Expr:Show:2"></span> Show (<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p)</span> <a href="src/PhantomFunctors.AST.html#line-338" class="link">Source</a> <a href="#t:Expr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Expr:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="PhantomFunctors-AST.html">PhantomFunctors.AST</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Helper functions</h1></a><div class="doc"><p>The helper functions of this section operate on AST nodes to check
 for different properties. As an example, to check whether an expression
 is a field, instead of having to pattern match in all places, i.e.,</p><pre>exampleFunction :: Expr -&gt; Bool
exampleFunction expr =
  -- does some stuff
  ...
  case expr of
    FieldAccess expr -&gt; True
    _                -&gt; False
</pre><p>we define the <code><a href="PhantomFunctors-AST.html#v:isFieldAccess" title="PhantomFunctors.AST">isFieldAccess</a></code> helper function, which checks
 whether a given expression is a <code><a href="PhantomFunctors-AST.html#v:FieldAccess" title="PhantomFunctors.AST">FieldAccess</a></code>:</p><pre>exampleFunction :: Expr -&gt; Bool
exampleFunction expr =
  -- does some stuff
  ...
  isFieldAccess expr
</pre></div><div class="top"><p class="src"><a id="v:thisName" class="def">thisName</a> :: <a href="PhantomFunctors-AST.html#t:Name" title="PhantomFunctors.AST">Name</a> <a href="src/PhantomFunctors.AST.html#thisName" class="link">Source</a> <a href="#v:thisName" class="selflink">#</a></p><div class="doc"><p>Constant for the name <code>this</code>, commonly used in object-oriented languages.</p></div></div><div class="top"><p class="src"><a id="v:isArrowType" class="def">isArrowType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isArrowType" class="link">Source</a> <a href="#v:isArrowType" class="selflink">#</a></p><div class="doc"><p>Checks whether a <code><a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a></code> is a function (arrow) type</p></div></div><div class="top"><p class="src"><a id="v:isFieldAccess" class="def">isFieldAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isFieldAccess" class="link">Source</a> <a href="#v:isFieldAccess" class="selflink">#</a></p><div class="doc"><p>Checks whether an expression is a <code><a href="PhantomFunctors-AST.html#v:FieldAccess" title="PhantomFunctors.AST">FieldAccess</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:isVarAccess" class="def">isVarAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isVarAccess" class="link">Source</a> <a href="#v:isVarAccess" class="selflink">#</a></p><div class="doc"><p>Checks whether an expression is a <code><a href="PhantomFunctors-AST.html#v:VarAccess" title="PhantomFunctors.AST">VarAccess</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:isThisAccess" class="def">isThisAccess</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isThisAccess" class="link">Source</a> <a href="#v:isThisAccess" class="selflink">#</a></p><div class="doc"><p>Checks whether an expression is a <code><a href="PhantomFunctors-AST.html#v:VarAccess" title="PhantomFunctors.AST">VarAccess</a></code> of <code>this</code>.</p></div></div><div class="top"><p class="src"><a id="v:isLVal" class="def">isLVal</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isLVal" class="link">Source</a> <a href="#v:isLVal" class="selflink">#</a></p><div class="doc"><p>Checks whether an expression is an lval.</p></div></div><div class="top"><p class="src"><a id="v:isClassType" class="def">isClassType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> p -&gt; Bool <a href="src/PhantomFunctors.AST.html#isClassType" class="link">Source</a> <a href="#v:isClassType" class="selflink">#</a></p><div class="doc"><p>Helper function to check whether a <code><a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a></code> is a class</p></div></div><div class="top"><p class="src"><a id="v:getType" class="def">getType</a> :: <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> <a href="src/PhantomFunctors.AST.html#getType" class="link">Source</a> <a href="#v:getType" class="selflink">#</a></p><div class="doc"><p>Helper function to extract the type from an expression.</p></div></div><div class="top"><p class="src"><a id="v:setType" class="def">setType</a> :: <a href="PhantomFunctors-AST.html#t:Type" title="PhantomFunctors.AST">Type</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> -&gt; <a href="PhantomFunctors-AST.html#t:Expr" title="PhantomFunctors.AST">Expr</a> <a href="PhantomFunctors-AST.html#v:Checked" title="PhantomFunctors.AST">Checked</a> <a href="src/PhantomFunctors.AST.html#setType" class="link">Source</a> <a href="#v:setType" class="selflink">#</a></p><div class="doc"><p>Sets the type of an expression <code>e</code> to <code>t</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>